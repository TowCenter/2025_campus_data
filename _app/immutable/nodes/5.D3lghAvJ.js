import"../chunks/CWj6FrbW.js";import"../chunks/DcQboELu.js";import{A as Rs,I as b,J as Lt,K as Ps,B as h,H as l,F as a,C as L,o as t,z as n,D as Es,L as p,G as s,u as c,M as de,N as mt,O as Ns,x as fe,y as kt,q as U,P as j,Q as Ct}from"../chunks/CqUr-CmS.js";import{e as ot,i as vt,r as Dt,s as Fs,a as Ke,b as ct,H as Us,F as qs}from"../chunks/9JiY_2qM.js";import{d as Bs,o as Ks,e as wt,s as k}from"../chunks/C29ozPaY.js";import{i as x,b as Hs}from"../chunks/BCPnFxgw.js";import{b as Ft}from"../chunks/BdCaXw6N.js";import{i as Js}from"../chunks/BSqfaJdf.js";/* empty css                */function Xs(Y,m){p(m,[...t(m),""])}function zs(Y,m){p(m,[...t(m),""])}function Ys(Y,m,S){const T=new Date,X=new Date(T.getFullYear(),T.getMonth()-1,T.getDate());p(m,X.toISOString().split("T")[0]),p(S,T.toISOString().split("T")[0])}function Qs(Y,m,S){const T=new Date,X=new Date(T.getFullYear(),T.getMonth()-3,T.getDate());p(m,X.toISOString().split("T")[0]),p(S,T.toISOString().split("T")[0])}function Vs(Y,m){p(m,[])}async function Gs(Y,m,S,T,X,q,gt,It,Ot,Ut,qt,y,P,ut){var St,_t,bt;const pt=t(m).filter(E=>E.trim());p(S,!0),p(T,null),p(X,!0),p(q,[]),p(gt,0),p(It,[]),p(Ot,[]);try{let C=(await Ut()).filter(v=>{var g;if(!v.date)return!1;const _=(typeof v.date=="string"?v.date:((g=v.date)==null?void 0:g.$date)||"").split("T")[0];return _>=t(qt)&&_<=t(y)});if(t(P).length>0){const v=t(P).map(_=>_.toLowerCase());C=C.filter(_=>v.includes((_.institution||"").toLowerCase()))}const V={};for(const v of C){const _=(typeof v.date=="string"?v.date:((St=v.date)==null?void 0:St.$date)||"").split("T")[0];if(_){const g=_.slice(0,7);V[g]=(V[g]||0)+1}}p(Ot,Object.entries(V).sort(([v],[_])=>v.localeCompare(_)).map(([v,_])=>({month:v,count:_})));let I;if(pt.length===0)I=C;else{const v=new Set;for(const g of pt){const at=g.toLowerCase();for(const B of C)`${B.title||""} ${B.content||""} ${B.institution||""}`.toLowerCase().includes(at)&&v.add(B.id||((_t=B._id)==null?void 0:_t.$oid)||B.url)}const _=t(ut).filter(g=>g.trim());I=C.filter(g=>{var at;return v.has(g.id||((at=g._id)==null?void 0:at.$oid)||g.url)}),_.length>0&&(I=I.filter(g=>{const at=`${g.title||""} ${g.content||""} ${g.institution||""}`.toLowerCase();return!_.some(B=>at.includes(B.toLowerCase()))}))}I.sort((v,_)=>{var B,ft;const g=typeof v.date=="string"?v.date:((B=v.date)==null?void 0:B.$date)||"";return(typeof _.date=="string"?_.date:((ft=_.date)==null?void 0:ft.$date)||"").localeCompare(g)}),p(q,I),p(gt,I.length);const dt={};for(const v of I){const _=(typeof v.date=="string"?v.date:((bt=v.date)==null?void 0:bt.$date)||"").split("T")[0];if(_){const g=_.slice(0,7);dt[g]=(dt[g]||0)+1}}p(It,Object.entries(dt).sort(([v],[_])=>v.localeCompare(_)).map(([v,_])=>({month:v,count:_})))}catch(E){console.error("Search error:",E),p(T,E.message)}finally{p(S,!1)}}var Ws=(Y,m,S)=>m(t(S)),Zs=h('<button class="topic-btn svelte-1ycvpfg"> </button>'),ta=h('<span class="or-label svelte-1ycvpfg">OR</span>'),ea=h('<button class="remove-btn svelte-1ycvpfg" aria-label="Remove phrase">−</button>'),sa=h('<div class="phrase-row svelte-1ycvpfg"><input type="text" placeholder="Enter search phrase..." class="phrase-input svelte-1ycvpfg"/> <!> <!></div>'),aa=h('<button class="remove-btn svelte-1ycvpfg" aria-label="Remove phrase">−</button>'),la=h('<div class="phrase-row svelte-1ycvpfg"><input type="text" placeholder="Exclude phrase..." class="phrase-input exclude svelte-1ycvpfg"/> <!></div>'),ra=h('<div class="boolean-tooltip svelte-1ycvpfg"><div class="boolean-tooltip-content svelte-1ycvpfg"><p class="svelte-1ycvpfg"><strong>Boolean search tips:</strong></p> <ul class="svelte-1ycvpfg"><li class="svelte-1ycvpfg"><strong>OR logic:</strong> Add multiple phrases to match any of them</li> <li class="svelte-1ycvpfg"><strong>AND NOT:</strong> Use exclusions to filter out unwanted results</li> <li class="svelte-1ycvpfg"><strong>Exact match:</strong> Phrases are matched exactly as entered</li> <li class="svelte-1ycvpfg"><strong>Empty search:</strong> Leave phrases empty and press Search to browse all articles</li></ul></div></div>'),oa=h("<code> </code>"),va=h('<span class="placeholder svelte-1ycvpfg">Enter phrases to see query</span>'),ca=(Y,m,S)=>m(t(S)),na=h('<span class="selected-tag svelte-1ycvpfg"> <button class="tag-remove svelte-1ycvpfg">×</button></span>'),ia=h('<div class="selected-institutions svelte-1ycvpfg"><!> <button class="clear-all-btn svelte-1ycvpfg">Clear all</button></div>'),pa=(Y,m,S)=>m(t(S)),da=h('<label class="institution-checkbox svelte-1ycvpfg"><input type="checkbox" class="svelte-1ycvpfg"/> <span> </span></label>'),fa=h('<div class="loading-institutions svelte-1ycvpfg">Loading institutions...</div>'),ga=h('<p class="error-text svelte-1ycvpfg"> </p>'),ua=h('<span class="preview-institutions svelte-1ycvpfg"> </span>'),_a=Ct('<circle r="5" fill="#254c6f" class="chart-point svelte-1ycvpfg"></circle>'),ha=Ct('<polyline fill="none" stroke="#254c6f" stroke-width="2"></polyline><!>',1),ya=Ct('<circle r="5" fill="#254c6f" class="chart-point svelte-1ycvpfg"></circle>'),ma=Ct('<circle r="3" fill="#999" class="chart-point-secondary svelte-1ycvpfg"></circle>'),ba=Ct('<text y="200" text-anchor="middle" class="axis-label svelte-1ycvpfg"> </text>'),xa=h('<div class="chart-tooltip-row svelte-1ycvpfg"><span class="chart-tooltip-dot keyword svelte-1ycvpfg"></span> Keyword matches: <strong> </strong></div>'),wa=h('<div class="chart-tooltip svelte-1ycvpfg"><div class="chart-tooltip-content svelte-1ycvpfg"><div class="chart-tooltip-month svelte-1ycvpfg"> </div> <!> <div class="chart-tooltip-row svelte-1ycvpfg"><span class="chart-tooltip-dot total svelte-1ycvpfg"></span> Total articles: <strong> </strong></div></div></div>'),ka=h('<div class="chart-legend svelte-1ycvpfg"><div class="legend-item svelte-1ycvpfg"><span class="legend-line solid svelte-1ycvpfg"></span> <span>Keyword matches</span></div> <div class="legend-item svelte-1ycvpfg"><span class="legend-line dashed svelte-1ycvpfg"></span> <span>Total articles</span></div></div>'),Sa=h('<div class="timeline-chart svelte-1ycvpfg"><svg viewBox="0 0 800 220" class="chart-svg svelte-1ycvpfg"><line x1="50" y1="30" x2="50" y2="180" stroke="#e0e0e0" stroke-width="1"></line><line x1="50" y1="180" x2="750" y2="180" stroke="#e0e0e0" stroke-width="1"></line><text x="40" y="35" text-anchor="end" class="axis-label svelte-1ycvpfg"> </text><text x="40" y="180" text-anchor="end" class="axis-label svelte-1ycvpfg">0</text><polyline fill="none" stroke="#999" stroke-width="2" stroke-dasharray="4,4"></polyline><!><!><!></svg> <!> <!></div>'),Ta=h('<p class="no-data svelte-1ycvpfg">No timeline data available</p>'),Ma=h('<a target="_blank" rel="noopener noreferrer" class="svelte-1ycvpfg"> </a>'),La=h('<tr class="svelte-1ycvpfg"><td class="title-cell svelte-1ycvpfg"><!></td><td class="source-cell svelte-1ycvpfg"><span class="source-icon svelte-1ycvpfg">●</span> </td><td class="date-cell svelte-1ycvpfg"> </td></tr>'),Da=h('<p class="sample-note svelte-1ycvpfg"> </p>'),Ca=h('<div class="sample-table-wrapper svelte-1ycvpfg"><table class="sample-table svelte-1ycvpfg"><thead><tr class="svelte-1ycvpfg"><th class="svelte-1ycvpfg">Title</th><th class="svelte-1ycvpfg">Source</th><th class="svelte-1ycvpfg">Publication Date</th></tr></thead><tbody></tbody></table></div> <!>',1),Ia=h('<p class="no-data svelte-1ycvpfg">No results found</p>'),Oa=h('<section class="results-section svelte-1ycvpfg"><div class="query-result-preview svelte-1ycvpfg"><span class="preview-label svelte-1ycvpfg">Search query:</span> <code class="svelte-1ycvpfg"> </code> <!></div> <div class="results-block svelte-1ycvpfg"><h2 class="svelte-1ycvpfg">Attention Over Time</h2> <p class="block-description svelte-1ycvpfg"><!></p> <!></div> <div class="results-row svelte-1ycvpfg"><div class="results-block half svelte-1ycvpfg"><h2 class="svelte-1ycvpfg">Total Attention</h2> <p class="block-description svelte-1ycvpfg"><!></p> <div class="total-bar svelte-1ycvpfg"><div class="bar-label svelte-1ycvpfg"> </div> <div class="bar-track svelte-1ycvpfg"><div class="bar-fill svelte-1ycvpfg"></div></div> <div class="bar-value svelte-1ycvpfg"> </div></div></div> <div class="results-block half svelte-1ycvpfg"><h2 class="svelte-1ycvpfg">Total Stories Count</h2> <div class="count-display svelte-1ycvpfg"><div class="count-number svelte-1ycvpfg"> </div> <div class="count-label svelte-1ycvpfg">matching articles</div></div></div></div> <div class="download-row svelte-1ycvpfg"><button class="download-btn svelte-1ycvpfg"> </button></div> <div class="results-block svelte-1ycvpfg"><h2 class="svelte-1ycvpfg">Sample Content</h2> <p class="block-description svelte-1ycvpfg">A sample of content that matched your queries.</p> <!></div></section>'),Aa=h('<div class="simple-database svelte-1ycvpfg"><div class="container svelte-1ycvpfg"><header class="page-header svelte-1ycvpfg"><h1 class="svelte-1ycvpfg">Campus Data Search</h1> <p class="subtitle svelte-1ycvpfg">Search university communications from January 2025 onwards</p></header> <section class="suggested-topics svelte-1ycvpfg"><span class="topics-label svelte-1ycvpfg">Suggested topics:</span> <div class="topics-buttons svelte-1ycvpfg"></div></section> <section class="search-section svelte-1ycvpfg"><div class="search-row svelte-1ycvpfg"><div class="search-group svelte-1ycvpfg"><h3 class="svelte-1ycvpfg"><span class="step-number svelte-1ycvpfg">1</span> Enter search phrases</h3> <p class="group-help svelte-1ycvpfg">Match <strong>Any</strong> of these phrases (leave empty for all articles):</p> <div class="phrase-inputs svelte-1ycvpfg"><!> <button class="add-btn svelte-1ycvpfg"><span class="svelte-1ycvpfg">+</span> Add phrase</button></div></div> <div class="search-group svelte-1ycvpfg"><h3 class="svelte-1ycvpfg">And <strong>none</strong> of these phrases:</h3> <div class="phrase-inputs svelte-1ycvpfg"><!> <button class="add-btn svelte-1ycvpfg"><span class="svelte-1ycvpfg">+</span> Add exclusion</button></div></div> <div class="search-group help-group svelte-1ycvpfg"><h3 class="svelte-1ycvpfg">Query preview <span class="boolean-help-icon svelte-1ycvpfg" role="button" tabindex="0">?</span> <!></h3> <div class="query-preview svelte-1ycvpfg"><!></div></div></div> <div class="search-row row-2 svelte-1ycvpfg"><div class="search-group institution-group svelte-1ycvpfg"><h3 class="svelte-1ycvpfg"><span class="step-number svelte-1ycvpfg">2</span> Pick institutions</h3> <p class="group-help svelte-1ycvpfg">Select one or more institutions (leave empty for all):</p> <!> <div class="institution-list svelte-1ycvpfg"><!> <!></div></div> <div class="search-group date-group svelte-1ycvpfg"><h3 class="svelte-1ycvpfg"><span class="step-number svelte-1ycvpfg">3</span> Pick dates</h3> <div class="date-inputs svelte-1ycvpfg"><div class="date-field svelte-1ycvpfg"><label class="svelte-1ycvpfg">From</label> <input type="date" class="date-input svelte-1ycvpfg"/></div> <div class="date-field svelte-1ycvpfg"><label class="svelte-1ycvpfg">To</label> <input type="date" class="date-input svelte-1ycvpfg"/></div></div> <div class="date-shortcuts svelte-1ycvpfg"><button class="shortcut-btn svelte-1ycvpfg">Last Month</button> <button class="shortcut-btn svelte-1ycvpfg">Last 3 Months</button></div></div></div> <div class="search-actions svelte-1ycvpfg"><button class="search-btn svelte-1ycvpfg"><!></button> <!></div></section> <!></div></div>');function ja(Y,m){Rs(m,!1);const S=b(),T=b(),X=b(),q=b(),gt=b(),It="https://2025-campus-data.s3.us-east-2.amazonaws.com/data.json",Ot="https://2025-campus-data.s3.us-east-2.amazonaws.com/month_index/manifest.json",Ut="https://2025-campus-data.s3.us-east-2.amazonaws.com/institution_index/manifest.json",qt=["DEI","Title IX","antisemitism","free speech","federal funding","immigration","protest"];let y=b([""]),P=b([""]),ut=b("2025-01-01"),pt=b(new Date().toISOString().split("T")[0]),St=b(!1),_t=b(!1),bt=b(null),E=b([]),C=b(0),V=b([]),I=b([]),dt=b([]),v=b([]),_=b(!1),g=b(null),at=b(0),B=b(0),ft=b(),Bt=b(null),ge=null,At=null;function He(e){t(y).length>1&&p(y,t(y).filter((r,o)=>o!==e))}function Je(e){t(P).length>1&&p(P,t(P).filter((r,o)=>o!==e))}function Xe(e){const r=t(y).findIndex(o=>!o.trim());r>=0?(de(y,t(y)[r]=e),p(y,[...t(y)])):p(y,[...t(y),e])}function ue(e){t(v).includes(e)?p(v,t(v).filter(r=>r!==e)):p(v,[...t(v),e])}function ze(){const e=t(y).filter(f=>f.trim()),r=t(P).filter(f=>f.trim());if(e.length===0)return"All articles";let o=e.map(f=>`"${f}"`).join(" OR ");return r.length>0&&(o+=" AND NOT ("+r.map(f=>`"${f}"`).join(" OR ")+")"),o}function _e(e,r){if(p(g,e),t(ft)){const o=t(ft).getBoundingClientRect();p(at,r.clientX-o.left),p(B,r.clientY-o.top-50)}}function he(){p(g,null)}async function Ye(){try{const[e,r]=await Promise.all([fetch(Ot),fetch(Ut)]);if(e.ok&&p(Bt,await e.json()),r.ok){ge=await r.json();const o=new Set;Object.values(ge).forEach(f=>{f&&typeof f=="object"&&Object.keys(f).forEach(D=>o.add(D))}),p(dt,[...o].sort())}}catch(e){console.error("Failed to load manifests:",e)}}async function Qe(){if(At)return At;const e=await fetch(It);if(!e.ok)throw new Error("Failed to load dataset");return At=await e.json(),At}function Ve(e){var o;return(typeof e.date=="string"?e.date:((o=e.date)==null?void 0:o.$date)||"").split("T")[0]}function Ge(e){if(!e)return"";const r=typeof e=="string"?e:(e==null?void 0:e.$date)||"";return new Date(r).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})}function ye(e){const[r,o]=e.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(o)-1]} ${r.slice(2)}`}async function We(){if(t(E).length===0)return;const e=["Title","Institution","Date","URL"],r=t(E).map(O=>[`"${(O.title||"").replace(/"/g,'""')}"`,`"${(O.institution||"").replace(/"/g,'""')}"`,Ve(O),O.url||""]),o=[e.join(","),...r.map(O=>O.join(","))].join(`
`),f=new Blob([o],{type:"text/csv"}),D=URL.createObjectURL(f),N=document.createElement("a");N.href=D,N.download=`search-results-${new Date().toISOString().split("T")[0]}.csv`,N.click(),URL.revokeObjectURL(D)}Ks(()=>{Ye()}),Lt(()=>t(E),()=>{p(S,t(E).slice(0,10))}),Lt(()=>t(Bt),()=>{p(T,Object.values(t(Bt)||{}).reduce((e,r)=>e+Object.values(r).reduce((o,f)=>o+f,0),0))}),Lt(()=>(t(T),t(C)),()=>{p(X,t(T)>0?(t(C)/t(T)*100).toFixed(2):0)}),Lt(()=>t(y),()=>{p(q,t(y).some(e=>e.trim()))}),Lt(()=>{},()=>{p(gt,ze())}),Ps(),Js();var Kt=Aa(),me=a(Kt),Ht=l(a(me),2),be=l(a(Ht),2);ot(be,5,()=>qt,vt,(e,r)=>{var o=Zs();o.__click=[Ws,Xe,r];var f=a(o,!0);s(o),L(()=>k(f,t(r))),n(e,o)}),s(be),s(Ht);var Jt=l(Ht,2),Xt=a(Jt),zt=a(Xt),xe=l(a(zt),4),we=a(xe);ot(we,1,()=>t(y),vt,(e,r,o)=>{var f=sa(),D=a(f);Dt(D);var N=l(D,2);{var O=G=>{var xt=ta();n(G,xt)};x(N,G=>{t(y),c(()=>o<t(y).length-1)&&G(O)})}var K=l(N,2);{var lt=G=>{var xt=ea();xt.__click=()=>He(o),n(G,xt)};x(K,G=>{t(y),c(()=>t(y).length>1)&&G(lt)})}s(f),Ft(D,()=>t(y)[o],G=>de(y,t(y)[o]=G)),n(e,f)});var Ze=l(we,2);Ze.__click=[Xs,y],s(xe),s(zt);var Yt=l(zt,2),ke=l(a(Yt),2),Se=a(ke);ot(Se,1,()=>t(P),vt,(e,r,o)=>{var f=la(),D=a(f);Dt(D);var N=l(D,2);{var O=K=>{var lt=aa();lt.__click=()=>Je(o),n(K,lt)};x(N,K=>{t(P),c(()=>t(P).length>1)&&K(O)})}s(f),Ft(D,()=>t(P)[o],K=>de(P,t(P)[o]=K)),n(e,f)});var ts=l(Se,2);ts.__click=[zs,P],s(ke),s(Yt);var Te=l(Yt,2),Qt=a(Te),Vt=l(a(Qt)),es=l(Vt,2);{var ss=e=>{var r=ra();n(e,r)};x(es,e=>{t(_)&&e(ss)})}s(Qt);var Me=l(Qt,2),as=a(Me);{var ls=e=>{var r=oa(),o=a(r,!0);s(r),L(()=>k(o,t(gt))),n(e,r)},rs=e=>{var r=va();n(e,r)};x(as,e=>{t(gt)?e(ls):e(rs,!1)})}s(Me),s(Te),s(Xt);var Gt=l(Xt,2),Wt=a(Gt),Le=l(a(Wt),4);{var os=e=>{var r=ia(),o=a(r);ot(o,1,()=>t(v),vt,(D,N)=>{var O=na(),K=a(O),lt=l(K);lt.__click=[ca,ue,N],s(O),L(()=>k(K,`${t(N)??""} `)),n(D,O)});var f=l(o,2);f.__click=[Vs,v],s(r),n(e,r)};x(Le,e=>{t(v),c(()=>t(v).length>0)&&e(os)})}var De=l(Le,2),Ce=a(De);ot(Ce,1,()=>t(dt),vt,(e,r)=>{var o=da(),f=a(o);Dt(f),f.__change=[pa,ue,r];var D=l(f,2),N=a(D,!0);s(D),s(o),L(O=>{Fs(f,O),k(N,t(r))},[()=>(t(v),t(r),c(()=>t(v).includes(t(r))))]),n(e,o)});var vs=l(Ce,2);{var cs=e=>{var r=fa();n(e,r)};x(vs,e=>{t(dt),c(()=>t(dt).length===0)&&e(cs)})}s(De),s(Wt);var Ie=l(Wt,2),Zt=l(a(Ie),2),te=a(Zt),Oe=l(a(te),2);Dt(Oe),s(te);var Ae=l(te,2),je=l(a(Ae),2);Dt(je),s(Ae),s(Zt);var $e=l(Zt,2),Re=a($e);Re.__click=[Ys,ut,pt];var ns=l(Re,2);ns.__click=[Qs,ut,pt],s($e),s(Ie),s(Gt);var Pe=l(Gt,2),Tt=a(Pe);Tt.__click=[Gs,y,_t,bt,St,E,C,V,I,Qe,ut,pt,v,P];var is=a(Tt);{var ps=e=>{var r=mt("Searching...");n(e,r)},ds=e=>{var r=mt("Search");n(e,r)};x(is,e=>{t(_t)?e(ps):e(ds,!1)})}s(Tt);var fs=l(Tt,2);{var gs=e=>{var r=ga(),o=a(r,!0);s(r),L(()=>k(o,t(bt))),n(e,r)};x(fs,e=>{t(bt)&&e(gs)})}s(Pe),s(Jt);var us=l(Jt,2);{var _s=e=>{var r=Oa(),o=a(r),f=l(a(o),2),D=a(f,!0);s(f);var N=l(f,2);{var O=u=>{var i=ua(),$=a(i);s(i),L(()=>k($,`in ${t(v),c(()=>t(v).length)??""} institution${t(v),c(()=>t(v).length>1?"s":"")??""}`)),n(u,i)};x(N,u=>{t(v),c(()=>t(v).length>0)&&u(O)})}s(o);var K=l(o,2),lt=l(a(K),2),G=a(lt);{var xt=u=>{var i=mt("Compare keyword matches (blue) against total articles (gray dashed) in your selected scope.");n(u,i)},hs=u=>{var i=mt("Total articles over time in your selected date range and institutions.");n(u,i)};x(G,u=>{t(q)?u(xt):u(hs,!1)})}s(lt);var ys=l(lt,2);{var ms=u=>{const i=j(()=>(t(I),t(V),c(()=>[...new Set([...t(I).map(d=>d.month),...t(V).map(d=>d.month)])].sort()))),$=j(()=>(t(I),t(V),c(()=>Math.max(...t(I).map(d=>d.count),...t(V).map(d=>d.count),1)))),z=j(()=>(t(I),c(()=>new Map(t(I).map(d=>[d.month,d.count]))))),ht=j(()=>(t(V),c(()=>new Map(t(V).map(d=>[d.month,d.count]))))),ve=j(()=>(U(t(i)),U(t(z)),U(t($)),c(()=>t(i).map((d,w)=>{const A=50+w/Math.max(t(i).length-1,1)*700,R=180-(t(z).get(d)||0)/t($)*150;return`${A},${R}`}).join(" ")))),ce=j(()=>(U(t(i)),U(t(ht)),U(t($)),c(()=>t(i).map((d,w)=>{const A=50+w/Math.max(t(i).length-1,1)*700,R=180-(t(ht).get(d)||0)/t($)*150;return`${A},${R}`}).join(" "))));var rt=Sa(),M=a(rt),nt=l(a(M),2),yt=a(nt,!0);s(nt);var $t=l(nt,2),Rt=l($t);{var ne=d=>{var w=ha(),A=kt(w),R=l(A);ot(R,1,()=>t(i),vt,(Q,H,Z)=>{const tt=j(()=>(U(t(i)),c(()=>50+Z/Math.max(t(i).length-1,1)*700))),J=j(()=>(U(t(ht)),t(H),c(()=>t(ht).get(t(H))||0))),F=j(()=>(U(t(z)),t(H),c(()=>t(z).get(t(H))||0))),et=j(()=>180-t(J)/t($)*150);var st=_a();L(()=>{ct(st,"cx",t(tt)),ct(st,"cy",t(et))}),wt("mouseenter",st,Nt=>_e({month:t(H),keyword:t(J),total:t(F)},Nt)),wt("mouseleave",st,he),n(Q,st)}),L(()=>ct(A,"points",t(ce))),n(d,w)},Mt=d=>{var w=fe(),A=kt(w);ot(A,1,()=>t(i),vt,(R,Q,H)=>{const Z=j(()=>(U(t(i)),c(()=>50+H/Math.max(t(i).length-1,1)*700))),tt=j(()=>(U(t(z)),t(Q),c(()=>t(z).get(t(Q))||0))),J=j(()=>180-t(tt)/t($)*150);var F=ya();L(()=>{ct(F,"cx",t(Z)),ct(F,"cy",t(J))}),wt("mouseenter",F,et=>_e({month:t(Q),total:t(tt)},et)),wt("mouseleave",F,he),n(R,F)}),n(d,w)};x(Rt,d=>{t(q)?d(ne):d(Mt,!1)})}var Pt=l(Rt);{var Et=d=>{var w=fe(),A=kt(w);ot(A,1,()=>t(i),vt,(R,Q,H)=>{const Z=j(()=>(U(t(i)),c(()=>50+H/Math.max(t(i).length-1,1)*700))),tt=j(()=>(U(t(z)),t(Q),c(()=>t(z).get(t(Q))||0))),J=j(()=>180-t(tt)/t($)*150);var F=ma();L(()=>{ct(F,"cx",t(Z)),ct(F,"cy",t(J))}),n(R,F)}),n(d,w)};x(Pt,d=>{t(q)&&d(Et)})}var ie=l(Pt);ot(ie,1,()=>t(i),vt,(d,w,A)=>{var R=fe(),Q=kt(R);{var H=Z=>{const tt=j(()=>(U(t(i)),c(()=>50+A/Math.max(t(i).length-1,1)*700)));var J=ba(),F=a(J,!0);s(J),L(et=>{ct(J,"x",t(tt)),k(F,et)},[()=>(t(w),c(()=>ye(t(w))))]),n(Z,J)};x(Q,Z=>{U(t(i)),c(()=>A%Math.ceil(t(i).length/6)===0||A===t(i).length-1)&&Z(H)})}n(d,R)}),s(M);var W=l(M,2);{var it=d=>{var w=wa(),A=a(w),R=a(A),Q=a(R,!0);s(R);var H=l(R,2);{var Z=et=>{var st=xa(),Nt=l(a(st),2),js=a(Nt,!0);s(Nt),s(st),L($s=>k(js,$s),[()=>(t(g),c(()=>t(g).keyword.toLocaleString()))]),n(et,st)};x(H,et=>{t(g),c(()=>t(g).keyword!==void 0)&&et(Z)})}var tt=l(H,2),J=l(a(tt),2),F=a(J,!0);s(J),s(tt),s(A),s(w),L((et,st)=>{Ke(w,`left: ${t(at)??""}px; top: ${t(B)??""}px;`),k(Q,et),k(F,st)},[()=>(t(g),c(()=>ye(t(g).month))),()=>(t(g),c(()=>t(g).total.toLocaleString()))]),n(d,w)};x(W,d=>{t(g)&&d(it)})}var pe=l(W,2);{var As=d=>{var w=ka();n(d,w)};x(pe,d=>{t(q)&&d(As)})}s(rt),Hs(rt,d=>p(ft,d),()=>t(ft)),L(()=>{k(yt,t($)),ct($t,"points",t(ve))}),n(u,rt)},bs=u=>{var i=Ta();n(u,i)};x(ys,u=>{t(I),c(()=>t(I).length>0)?u(ms):u(bs,!1)})}s(K);var ee=l(K,2),se=a(ee),ae=l(a(se),2),xs=a(ae);{var ws=u=>{var i=mt("Percentage of articles matching your keywords out of total in scope.");n(u,i)},ks=u=>{var i=mt("Articles in your selected date range and institutions.");n(u,i)};x(xs,u=>{t(q)?u(ws):u(ks,!1)})}s(ae);var Ee=l(ae,2),le=a(Ee),Ss=a(le,!0);s(le);var re=l(le,2),Ts=a(re);s(re);var Ne=l(re,2),Ms=a(Ne,!0);s(Ne),s(Ee),s(se);var Fe=l(se,2),Ue=l(a(Fe),2),qe=a(Ue),Ls=a(qe,!0);s(qe),Ns(2),s(Ue),s(Fe),s(ee);var oe=l(ee,2),jt=a(oe);jt.__click=We;var Ds=a(jt);s(jt),s(oe);var Be=l(oe,2),Cs=l(a(Be),4);{var Is=u=>{var i=Ca(),$=kt(i),z=a($),ht=l(a(z));ot(ht,5,()=>t(S),vt,(rt,M)=>{var nt=La(),yt=a(nt),$t=a(yt);{var Rt=W=>{var it=Ma(),pe=a(it,!0);s(it),L(()=>{ct(it,"href",(t(M),c(()=>t(M).url))),k(pe,(t(M),c(()=>t(M).title||"Untitled")))}),n(W,it)},ne=W=>{var it=mt();L(()=>k(it,(t(M),c(()=>t(M).title||"Untitled")))),n(W,it)};x($t,W=>{t(M),c(()=>t(M).url)?W(Rt):W(ne,!1)})}s(yt);var Mt=l(yt),Pt=l(a(Mt));s(Mt);var Et=l(Mt),ie=a(Et,!0);s(Et),s(nt),L(W=>{k(Pt,` ${t(M),c(()=>t(M).institution||"Unknown")??""}`),k(ie,W)},[()=>(t(M),c(()=>Ge(t(M).date)))]),n(rt,nt)}),s(ht),s(z),s($);var ve=l($,2);{var ce=rt=>{var M=Da(),nt=a(M);s(M),L(yt=>k(nt,`Showing 10 of ${yt??""} results. Download CSV for full data.`),[()=>(t(C),c(()=>t(C).toLocaleString()))]),n(rt,M)};x(ve,rt=>{t(E),c(()=>t(E).length>10)&&rt(ce)})}n(u,i)},Os=u=>{var i=Ia();n(u,i)};x(Cs,u=>{t(S),c(()=>t(S).length>0)?u(Is):u(Os,!1)})}s(Be),s(r),L((u,i,$,z)=>{k(D,t(gt)),k(Ss,t(q)?"Keyword Match Rate":"Articles Found"),Ke(Ts,`width: ${u??""}%;`),k(Ms,i),k(Ls,$),jt.disabled=(t(E),c(()=>t(E).length===0)),k(Ds,`Download All URLs (${z??""} items)`)},[()=>(t(q),t(X),c(()=>t(q)?Math.min(t(X),100):100)),()=>(t(q),t(X),t(C),c(()=>t(q)?`${t(X)}%`:`${t(C).toLocaleString()}`)),()=>(t(C),c(()=>t(C).toLocaleString())),()=>(t(C),c(()=>t(C).toLocaleString()))]),n(e,r)};x(us,e=>{t(St)&&!t(_t)&&e(_s)})}s(me),s(Kt),L(()=>Tt.disabled=t(_t)),wt("mouseenter",Vt,()=>p(_,!0)),wt("mouseleave",Vt,()=>p(_,!1)),Ft(Oe,()=>t(ut),e=>p(ut,e)),Ft(je,()=>t(pt),e=>p(pt,e)),n(Y,Kt),Es()}Bs(["click","change"]);var $a=h("<!> <!> <!>",1);function Ha(Y){var m=$a(),S=kt(m);Us(S,{});var T=l(S,2);ja(T,{});var X=l(T,2);qs(X),n(Y,m)}export{Ha as component};
